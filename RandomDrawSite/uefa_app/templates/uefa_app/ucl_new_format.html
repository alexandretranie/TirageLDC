{% load static %}
<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Document Title -->
    <title>Champions League Draw Simulator</title>

    <!-- Favicons -->
    <link rel="icon" type="image/png" sizes="32x32" href="{% static 'assets/images/favicons/favicon-32x32.webp' %}">
    <link rel="icon" type="image/png" sizes="96x96" href="{% static 'assets/images/favicons/favicon-96x96.webp' %}">
    <link rel="icon" type="image/png" sizes="16x16" href="{% static 'assets/images/favicons/favicon-16x16.png' %}">
    <meta name="theme-color" content="#ffffff">

    <!-- Stylesheets -->
     <style>
      /* the button next to the result tables */
    .btn-custom {
      background-color: white;
      border: 1px solid black;
      color: black;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 40px;
      height: 40px;
      padding: 0;
      border-radius: 50%;
  }
  
  .btn-custom:hover {
      background-color: #f0f0f0;
  }
  
  .btn-custom i {
      color: black;
  }
  </style>


    <!-- Default stylesheets-->
    <link href="{% static 'assets/lib/bootstrap/dist/css/bootstrap.min.css' %}" rel="stylesheet">
    <!-- Template specific stylesheets-->
    <link href="https://fonts.googleapis.com/css?family=Roboto+Condensed:400,700" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Volkhov:400i" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700,800" rel="stylesheet">
    <link href="{% static 'assets/lib/animate.css/animate.css' %}" rel="stylesheet">
    <link href="{% static 'assets/lib/components-font-awesome/css/font-awesome.min.css' %}" rel="stylesheet">
    <link href="{% static 'assets/lib/et-line-font/et-line-font.css' %}" rel="stylesheet">
    <link href="{% static 'assets/lib/flexslider/flexslider.css' %}" rel="stylesheet">
    <link href="{% static 'assets/lib/owl.carousel/dist/assets/owl.carousel.min.css' %}" rel="stylesheet">
    <link href="{% static 'assets/lib/owl.carousel/dist/assets/owl.theme.default.min.css' %}" rel="stylesheet">
    <link href="{% static 'assets/lib/magnific-popup/dist/magnific-popup.css' %}" rel="stylesheet">
    <link href="{% static 'assets/lib/simple-text-rotator/simpletextrotator.css' %}" rel="stylesheet">
    <!-- Main stylesheet and color file-->
    <link href="{% static 'assets/css/style.css' %}" rel="stylesheet">
    <link id="color-scheme" href="{% static 'assets/css/colors/default.css' %}" rel="stylesheet">
  </head>
  <body>
    <main>
      <div class="page-loader">
        <div class="loader">Loading...</div>
      </div>
      <nav class="navbar navbar-custom navbar-fixed-top navbar-transparent" role="navigation">
        <div class="container">
          <div class="navbar-header">
            <button class="navbar-toggle" type="button" data-toggle="collapse" data-target="#custom-collapse"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a class="navbar-brand" href="#home">UEFA DRAW</a>
          </div>
          <div class="collapse navbar-collapse" id="custom-collapse">
            <ul class="nav navbar-nav navbar-right">
              <li><a href="#home">Home</a></li>
              <li><a href="#about">New Format</a></li>
              <li><a href="#alt-simulation">Simulation</a></li>
              <li><a href="#details">Details</a></li>
            </ul>
          </div>
        </div>
      </nav>
      <section class="home-section home-fade home-full-height bg-dark-60 landing-header" id="home" data-background="{% static 'assets/images/landing/soccer-landing.jpg' %}">
        <div class="titan-caption">
          <div class="caption-content">
            <div class="container">
              <div class="font-alt mb-30 titan-title-size-4">Champions League Draw Simulator</div>
              <div class="font-alt">Discover UEFA Champions League New Format<br>And simulate a random draw!</div>
              <div class="font-alt mt-30"><a class="btn btn-border-w btn-circle" href="#alt-simulation"><i class="fa fa-chevron-circle-down"></i> Simulation</a></div>
            </div>
          </div>
        </div>
      </section>
      <div class="main">
        <section class="module-medium" id="about">
          <div class="container">
            <div class="row">
              <div class="col-sm-8 col-sm-offset-2">
                <h2 class="module-title font-alt">About the new Format</h2>
                <div class="module-subtitle font-serif large-text">Link to the UEFA website
                    <div class="text-center mb-30">
                        <div class="btn-group">
                            <a class="btn btn-border-d btn-circle" href="https://www.uefa.com/uefachampionsleague/news/0268-12157d69ce2d-9f011c70f6fa-1000--new-format-for-champions-league-post-2024-everything-you-ne/">
                                <i class="fa fa-info-circle"></i> UEFA RULES
                            </a>
                        </div>
                    </div>
                </div>
              </div>
            </div>
            <div class="row mt-30">
              <!-- Left Column: Image -->
              <div class="col-md-6">
                <img src="{% static 'assets/images/landing/champions_league_new_format.jpg' %}" alt="Format Explanation" class="img-responsive">
                <div class="text-italic">Source: uefa.com</div>
              </div>
              <!-- Right Column: Text Explanation -->
              <div class="col-md-6">
                <h3 class="module-title font-alt">A Brief Description</h3>
                <p>The Union of European Football Associations, commonly known as UEFA, has announced plans to introduce a new format for the Champions League, Europe's most prestigious club football competition, starting next season. This reform aims to expand the number of participating teams and enhance the viewing experience for fans.</p>
                <p>Our analysis focuses on the initial phase of this revised format, which features a mini-league comprising 36 teams. These teams are ranked based on their UEFA coefficient and are allocated into four pots of nine teams each, labeled from 1 (highest coefficient) to 4 (lowest coefficient).. The regulations governing this format, which will be referred to as the constraints of this problem, are as follows:</p>
                <ul>
                  <li>Each team will play eight matches, consisting of exactly two matches against two different teams from each pot, one at home and one away.</li>
                  <li>A team may not compete against another team from the same country.</li>
                  <li>A team is restricted to playing against no more than two teams from any single country.</li>
                  <li>All matches must be scheduled across eight match days.</li>
                </ul>
              </div>
            </div>
          </div>
        </section>
        <section class="module pb-0 bg-dark landing-reason parallax-bg" data-background="{% static 'assets/images/landing/screen_tirage_gurobi.png' %}">
          <div class="container">
            <div class="row mb-30" >
              <div class="col-sm-6 mr-5"><img class="align-items-center" style="margin-top: 150px;" src="{% static 'assets/images/landing/diagram_random_draw_pinkv3.png' %}" alt=""></div>
              <div class="col-sm-6">
                <h2 class="module-title font-alt align-center ml-5">How the draw might work <div class="text-center mb-30">
                        <div class="btn-group">
                            <a class="btn btn-border-d btn-circle" href="https://www.uefa.com/news-media/news/028f-1b7f80216368-4c26e95cc15b-1000--uefa-club-competitions-2024-25-onwards-new-league-phase-/">
                                <i class="fa fa-info-circle"></i> DRAW RULES LINK
                            </a>
                        </div>
                    </div></h2>
                <div class="module-subtitle font-awesome align-left mt-5">
                  <ul>
                    <li>A team is randomly drawn from pot 1. Its 8 opponents are randomly drawn as follows.</li>
                    <li>The list of its admissible (home, away) pair of pot 1 opponents is established and one pair is randomly drawn.</li>
                    <li>Same with pot 2, pot 3 and pot 4 opponents.</li>
                    <li>Another team is randomly drawn from pot 1, and its 8 opponents are randomly drawn as above. This is repeated for all pot 1 teams.</li>
                    <li>The draw moves to pot 2. A team is randomly drawn from pot 2. Its two pot 1 opponents have already been drawn. Its 6 opponents from pots 2, 3, and 4 are randomly drawn as above.</li>
                    <li>Another team is randomly drawn from pot 2, and its 6 opponents from pots 2, 3, and 4, are randomly drawn as above. This is repeated until pot 2 has been emptied.</li>
                    <li>The draw moves to pot 3, and then to pot 4, using the same process.</li>
                    <li>To compute the list of admissible (home, away) pair of opponents in a given pot, the computer takes into account all the draw constraints and the current state of the draw, and anticipates all future scenarios to avoid a future deadlock. We use the Gurobi optimizer.</li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
        </section>
        <section class="module" id="alt-simulation">
          <div class="container">
              <div class="row">
                  <div class="col-sm-6 col-sm-offset-3">
                      <h2 class="module-title font-alt">Simulation</h2>
                      <div class="module-subtitle font-serif">Simulate a random draw just here!</div>
                  </div>
              </div>
              <div class="row">
                  <!-- Left Column: Text Presentation -->
                  <div class="col-md-3" style="padding-right: 60px">
                    <h2 class="module-title font-alt">Draw Stage</h2>
                    <div class="text-center mb-30">
                        <button class="btn btn-primary btn-lg" id="draw-button">Start Draw</button>
                    </div>
                    <div class="row">
                        <div class="col-md-8">
                            <p class="module-subtitle font-serif text-center" style="margin-bottom: 30px;">
                                Team: <span class="innerText" id="current_team_text">Display current team</span>
                            </p>
                        </div>
                        <div class="col-md-4">
                            <p class="module-subtitle font-serif text-center" style="margin-bottom: 30px;">
                                Pot: <span class="innerText" id="current_group_text">Display current pot</span>
                            </p>
                        </div>
                    </div>
                    <p style="display: none;">Let's find the opponents of <span class="innerText" id="current_team_text2">Display current team</span></p>
                    <div id="admissible_opponents_container" style="display: none;">
                        <div class="col-12">
                            <p>List of admissible (home, away) pair of opponents in pot <span id="pot_adv_text_2">pot_adv</span>:</p>
                            <div class="row">
                                <div class="col-md-6">
                                    <ul id="admissible_opponents_list_1"></ul>
                                </div>
                                <div class="col-md-6" style="display: none;">
                                    <ul id="admissible_opponents_list_2"></ul>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div id="selected_match_container" style="display: none;">
                        <p>The pair of (home, away) opponents randomly selected is: <span  id="selected_match_text">selected_match</span></p>
                        <p>We update the constraints to include these new matches</p>
                    </div>
                  </div>

                  <!-- Right Column: Matches Table -->
                  <div class="col-md-9">
                    <h2 class="module-title font-alt"><span id="current_group_table_text">Drawing opponents for Pot {{ current_group }} teams</span></h2>
                      <div class="table-responsive">
                          <table class="table table-striped table-bordered" id="table-matches-group-1">
                              <thead class="thead-dark">
                                  <tr>
                                      <th></th>
                                      <th colspan="2">Pot 1</th>
                                      <th colspan="2">Pot 2</th>
                                      <th colspan="2">Pot 3</th>
                                      <th colspan="2">Pot 4</th>
                                  </tr>
                                  <tr>
                                      <th></th>
                                      <th>Home</th>
                                      <th>Away</th>
                                      <th>Home</th>
                                      <th>Away</th>
                                      <th>Home</th>
                                      <th>Away</th>
                                      <th>Home</th>
                                      <th>Away</th>
                                  </tr>
                              </thead>
                              <tbody>
                                  {% for team in group1 %}
                                  <tr style="background-color: ;" id="row-pot-table-{{team}}">
                                      <td style="font-weight: 600;">{{ team }}</td>
                                      <td id="pot-a-home-{{ team }}"></td>
                                      <td id="pot-a-away-{{ team }}"></td>
                                      <td id="pot-b-home-{{ team }}"></td>
                                      <td id="pot-b-away-{{ team }}"></td>
                                      <td id="pot-c-home-{{ team }}"></td>
                                      <td id="pot-c-away-{{ team }}"></td>
                                      <td id="pot-d-home-{{ team }}"></td>
                                      <td id="pot-d-away-{{ team }}"></td>
                                  </tr>
                                  {% endfor %}
                              </tbody>
                          </table>
                          <table class="table table-striped table-bordered" id="table-matches-group-2" style="display: none;">
                            <thead class="thead-dark">
                                <tr>
                                    <th></th>
                                    <th colspan="2">Pot 1</th>
                                    <th colspan="2">Pot 2</th>
                                    <th colspan="2">Pot 3</th>
                                    <th colspan="2">Pot 4</th>
                                </tr>
                                <tr>
                                    <th></th>
                                    <th>Home</th>
                                    <th>Away</th>
                                    <th>Home</th>
                                    <th>Away</th>
                                    <th>Home</th>
                                    <th>Away</th>
                                    <th>Home</th>
                                    <th>Away</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for team in group2 %}
                                <tr style="background-color: ;" id="row-pot-table-{{team}}">
                                    <td style="font-weight: 600;">{{ team }}</td>
                                    <td id="pot-a-home-{{ team }}"></td>
                                    <td id="pot-a-away-{{ team }}"></td>
                                    <td id="pot-b-home-{{ team }}"></td>
                                    <td id="pot-b-away-{{ team }}"></td>
                                    <td id="pot-c-home-{{ team }}"></td>
                                    <td id="pot-c-away-{{ team }}"></td>
                                    <td id="pot-d-home-{{ team }}"></td>
                                    <td id="pot-d-away-{{ team }}"></td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                        <table class="table table-striped table-bordered" id="table-matches-group-3" style="display: none;">
                          <thead class="thead-dark">
                              <tr>
                                  <th></th>
                                  <th colspan="2">Pot 1</th>
                                  <th colspan="2">Pot 2</th>
                                  <th colspan="2">Pot 3</th>
                                  <th colspan="2">Pot 4</th>
                              </tr>
                              <tr>
                                  <th></th>
                                  <th>Home</th>
                                  <th>Away</th>
                                  <th>Home</th>
                                  <th>Away</th>
                                  <th>Home</th>
                                  <th>Away</th>
                                  <th>Home</th>
                                  <th>Away</th>
                              </tr>
                          </thead>
                          <tbody>
                              {% for team in group3 %}
                              <tr style="background-color: ;" id="row-pot-table-{{team}}">
                                <td style="font-weight: 600;">{{ team }}</td>
                                  <td id="pot-a-home-{{ team }}"></td>
                                  <td id="pot-a-away-{{ team }}"></td>
                                  <td id="pot-b-home-{{ team }}"></td>
                                  <td id="pot-b-away-{{ team }}"></td>
                                  <td id="pot-c-home-{{ team }}"></td>
                                  <td id="pot-c-away-{{ team }}"></td>
                                  <td id="pot-d-home-{{ team }}"></td>
                                  <td id="pot-d-away-{{ team }}"></td>
                              </tr>
                              {% endfor %}
                          </tbody>
                      </table>
                      <table class="table table-striped table-bordered" id="table-matches-group-4" style="display: none;">
                        <thead class="thead-dark">
                            <tr>
                                <th></th>
                                <th colspan="2">Pot 1</th>
                                <th colspan="2">Pot 2</th>
                                <th colspan="2">Pot 3</th>
                                <th colspan="2">Pot 4</th>
                            </tr>
                            <tr>
                                <th></th>
                                <th>Home</th>
                                <th>Away</th>
                                <th>Home</th>
                                <th>Away</th>
                                <th>Home</th>
                                <th>Away</th>
                                <th>Home</th>
                                <th>Away</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for team in group4 %}
                            <tr style="background-color: ;" id="row-pot-table-{{team}}">
                                <td style="font-weight: 600;">{{ team }}</td>
                                <td id="pot-a-home-{{ team }}"></td>
                                <td id="pot-a-away-{{ team }}"></td>
                                <td id="pot-b-home-{{ team }}"></td>
                                <td id="pot-b-away-{{ team }}"></td>
                                <td id="pot-c-home-{{ team }}"></td>
                                <td id="pot-c-away-{{ team }}"></td>
                                <td id="pot-d-home-{{ team }}"></td>
                                <td id="pot-d-away-{{ team }}"></td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                      </div>
                  </div>
              </div>
      
              <!-- Results Table -->
              <div class="row mt-30">
                <div class="col-12">
                    <h2 class="module-title font-alt">Results <a class="btn btn-custom" data-toggle="collapse" href="#resultsCollapse" role="button" aria-expanded="false" aria-controls="resultsCollapse"><i class="fa fa-chevron-down"></i></a>
                    </h2> 
                    <div class="collapse" id="resultsCollapse">
                        <div class="table-responsive">
                            <table class="table table-striped table-bordered" id="result-table-matches-group-1">
                                <thead class="thead-dark">
                                    <tr>
                                        <th></th>
                                        <th colspan="2">Pot 1</th>
                                        <th colspan="2">Pot 2</th>
                                        <th colspan="2">Pot 3</th>
                                        <th colspan="2">Pot 4</th>
                                    </tr>
                                    <tr>
                                        <th></th>
                                        <th>Home</th>
                                        <th>Away</th>
                                        <th>Home</th>
                                        <th>Away</th>
                                        <th>Home</th>
                                        <th>Away</th>
                                        <th>Home</th>
                                        <th>Away</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for team in group1 %}
                                    <tr>
                                        <td style="font-weight: 600;">{{ team }}</td>
                                        <td id="result-pot-a-home-{{ team }}"></td>
                                        <td id="result-pot-a-away-{{ team }}"></td>
                                        <td id="result-pot-b-home-{{ team }}"></td>
                                        <td id="result-pot-b-away-{{ team }}"></td>
                                        <td id="result-pot-c-home-{{ team }}"></td>
                                        <td id="result-pot-c-away-{{ team }}"></td>
                                        <td id="result-pot-d-home-{{ team }}"></td>
                                        <td id="result-pot-d-away-{{ team }}"></td>
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                            <table class="table table-striped table-bordered" id="result-table-matches-group-2">
                                <thead class="thead-dark">
                                    <tr>
                                        <th></th>
                                        <th colspan="2">Pot 1</th>
                                        <th colspan="2">Pot 2</th>
                                        <th colspan="2">Pot 3</th>
                                        <th colspan="2">Pot 4</th>
                                    </tr>
                                    <tr>
                                        <th></th>
                                        <th>Home</th>
                                        <th>Away</th>
                                        <th>Home</th>
                                        <th>Away</th>
                                        <th>Home</th>
                                        <th>Away</th>
                                        <th>Home</th>
                                        <th>Away</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for team in group2 %}
                                    <tr>
                                        <td style="font-weight: 600;">{{ team }}</td>
                                        <td id="result-pot-a-home-{{ team }}"></td>
                                        <td id="result-pot-a-away-{{ team }}"></td>
                                        <td id="result-pot-b-home-{{ team }}"></td>
                                        <td id="result-pot-b-away-{{ team }}"></td>
                                        <td id="result-pot-c-home-{{ team }}"></td>
                                        <td id="result-pot-c-away-{{ team }}"></td>
                                        <td id="result-pot-d-home-{{ team }}"></td>
                                        <td id="result-pot-d-away-{{ team }}"></td>
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                            <table class="table table-striped table-bordered" id="result-table-matches-group-3">
                                <thead class="thead-dark">
                                    <tr>
                                        <th></th>
                                        <th colspan="2">Pot 1</th>
                                        <th colspan="2">Pot 2</th>
                                        <th colspan="2">Pot 3</th>
                                        <th colspan="2">Pot 4</th>
                                    </tr>
                                    <tr>
                                        <th></th>
                                        <th>Home</th>
                                        <th>Away</th>
                                        <th>Home</th>
                                        <th>Away</th>
                                        <th>Home</th>
                                        <th>Away</th>
                                        <th>Home</th>
                                        <th>Away</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for team in group3 %}
                                    <tr>
                                        <td style="font-weight: 600;">{{ team }}</td>
                                        <td id="result-pot-a-home-{{ team }}"></td>
                                        <td id="result-pot-a-away-{{ team }}"></td>
                                        <td id="result-pot-b-home-{{ team }}"></td>
                                        <td id="result-pot-b-away-{{ team }}"></td>
                                        <td id="result-pot-c-home-{{ team }}"></td>
                                        <td id="result-pot-c-away-{{ team }}"></td>
                                        <td id="result-pot-d-home-{{ team }}"></td>
                                        <td id="result-pot-d-away-{{ team }}"></td>
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                            <table class="table table-striped table-bordered" id="result-table-matches-group-4">
                                <thead class="thead-dark">
                                    <tr>
                                        <th></th>
                                        <th colspan="2">Pot 1</th>
                                        <th colspan="2">Pot 2</th>
                                        <th colspan="2">Pot 3</th>
                                        <th colspan="2">Pot 4</th>
                                    </tr>
                                    <tr>
                                        <th></th>
                                        <th>Home</th>
                                        <th>Away</th>
                                        <th>Home</th>
                                        <th>Away</th>
                                        <th>Home</th>
                                        <th>Away</th>
                                        <th>Home</th>
                                        <th>Away</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for team in group4 %}
                                    <tr>
                                        <td style="font-weight: 600;">{{ team }}</td>
                                        <td id="result-pot-a-home-{{ team }}"></td>
                                        <td id="result-pot-a-away-{{ team }}"></td>
                                        <td id="result-pot-b-home-{{ team }}"></td>
                                        <td id="result-pot-b-away-{{ team }}"></td>
                                        <td id="result-pot-c-home-{{ team }}"></td>
                                        <td id="result-pot-c-away-{{ team }}"></td>
                                        <td id="result-pot-d-home-{{ team }}"></td>
                                        <td id="result-pot-d-away-{{ team }}"></td>
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
              </div>



          </div>
      </section>
      <section class="module-small free-trial" id="details">
          <div class="container text-center">
              <div class="row">
                  <div class="col-sm-8 col-sm-offset-2">
                      <h2 class="font-alt">Find&nbsp;<span class="color-golden">More Details</span> Below</h2>
                      <p class="color-light font-15">The implementation of this draw simulator was carried out as part of an academic project realized by Adle Ben Salem, Thomas Buchholtzer and Mathieu Tanré, and led by Julien Guyon and Frédéric Meunier at École nationale des ponts et chaussées, Paris, France. You can find the report below.</p>
                  </div>
              </div>
              <div>
                <a class="btn btn-warning btn-circle" href="{% static 'assets/Champions_League_Report.pdf' %}" download="AcademicProject.pdf">Download the academic report</a>
              </div>
          </div>
      </section>
      <footer class="footer bg-dark">
          <div class="container">
              <div class="row">
                  <div class="col-sm-6">
                      <p class="copyright font-alt">&copy; 2024&nbsp;<a href="#home">Website Design by Adle Ben Salem and Julien Guyon </a></p>
                  </div>
                  <div class="col-sm-6">
                    <div class="footer-social-links"> Contacts: <a href="https://github.com/Jeerhz"><i class="fa fa-github"></i></a><a href="https://linkedin.com/in/adle-ben-salem"><i class="fa  fa-linkedin-square"></i></a> | <a href="https://github.com/JulienGuyon"><i class="fa fa-github"></i></a><a href="https://www.linkedin.com/in/julien-guyon-9a5473b/"><i class="fa  fa-linkedin-square"></i></a> 
                    </div>
                  </div>
              </div>
          </div>
      </footer>
      <div class="scroll-up"><a href="#totop"><i class="fa fa-angle-double-up"></i></a></div>
      
      <!-- JavaScripts -->
      <script src="{% static 'assets/lib/jquery/dist/jquery.js' %}"></script>
      <script src="{% static 'assets/lib/bootstrap/dist/js/bootstrap.min.js' %}"></script>
      <script src="{% static 'assets/lib/wow/dist/wow.js' %}"></script>
      <script src="{% static 'assets/lib/jquery.mb.ytplayer/dist/jquery.mb.YTPlayer.js' %}"></script>
      <script src="{% static 'assets/lib/isotope/dist/isotope.pkgd.js' %}"></script>
      <script src="{% static 'assets/lib/imagesloaded/imagesloaded.pkgd.js' %}"></script>
      <script src="{% static 'assets/lib/flexslider/jquery.flexslider.js' %}"></script>
      <script src="{% static 'assets/lib/owl.carousel/dist/owl.carousel.min.js' %}"></script>
      <script src="{% static 'assets/lib/magnific-popup/dist/jquery.magnific-popup.js' %}"></script>
      <script src="{% static 'assets/lib/simple-text-rotator/jquery.simple-text-rotator.min.js' %}"></script>
      <script src="{% static 'assets/js/plugins.js' %}"></script>
      <script src="{% static 'assets/js/main.js' %}"></script>
      
      <!-- Custom JS to handle the random draw -->
      <script>
        document.addEventListener('DOMContentLoaded', function() {
        const drawButton = document.getElementById('draw-button');
        let lastDim = {{ last_dim }};
        let potAdv = {{ pot_adv }};
        let countEquipe = {{ count_equipe }};
        let currentTeam = "{{ current_team }}";
        let admissibleOpponents = {{ admissible_opponents|safe }};
        let selectedMatch = JSON.parse('{{ selected_match|escapejs }}'); // Parse the JSON string
        const drawData = JSON.parse('{{ draw_data|escapejs }}'); // Parse the JSON string
        const all_groups = JSON.parse('{{ all_groups|escapejs }}');
        let current_group_teams = all_groups[0];
        const currentGroupText = document.getElementById('current_group_text');
        const currentTeamText = document.getElementById('current_team_text');
        const currentTeamText2 = document.getElementById('current_team_text2');
        const potAdvText2 = document.getElementById('pot_adv_text_2');
        const admissibleOpponentsList1 = document.getElementById('admissible_opponents_list_1');
        const admissibleOpponentsList2 = document.getElementById('admissible_opponents_list_2');
        const selectedMatchText = document.getElementById('selected_match_text');
        const admissibleOpponentsContainer = document.getElementById('admissible_opponents_container');
        const selectedMatchContainer = document.getElementById('selected_match_container');
        const currentGroupTableText = document.getElementById('current_group_table_text');

        const groupTables = {
            1: document.getElementById('table-matches-group-1'),
            2: document.getElementById('table-matches-group-2'),
            3: document.getElementById('table-matches-group-3'),
            4: document.getElementById('table-matches-group-4')
        };

        const resultTables = {
            1: document.getElementById('result-table-matches-group-1'),
            2: document.getElementById('result-table-matches-group-2'),
            3: document.getElementById('result-table-matches-group-3'),
            4: document.getElementById('result-table-matches-group-4')
        };

        function updatePotAdv() {
            potAdvText2.innerText = potAdv + 1;
        }

        function updateCurrentGroup() {
            const groupNumber = Math.floor(countEquipe / 9) + 1;
            if (groupNumber < 5){ 
                currentGroupText.innerText = groupNumber;
                currentGroupTableText.innerText = `Drawing opponents for Pot ${groupNumber} teams`;
                current_group_teams = all_groups[groupNumber - 1];
                showCurrentGroupTable(groupNumber);
            }
            else {
                currentGroupTableText.innerText = `Random Draw Finished`;
                currentGroupText.innerText = 4;
                showCurrentGroupTable(5);


            }
        }


        function showCurrentGroupTable(groupNumber) {
            for (let i = 1; i <= 4; i++) {
                groupTables[i].style.display = i === groupNumber ? 'table' : 'none';
            }
        }

        function updateCurrentTeam() {
            currentTeamText.innerText = currentTeam;
            currentTeamText2.innerText = currentTeam;
        }

        // function updateAdmissibleOpponents() {
        //     admissibleOpponentsList1.innerHTML = '';
        //     admissibleOpponentsList2.innerHTML = '';
        //     const limit = Math.min(admissibleOpponents.length, 10);
        //     const midPoint = Math.floor(limit / 2);
            
        //     for (let i = 0; i < limit; i++) {
        //         const li = document.createElement('li');
        //         li.innerText = admissibleOpponents[i];
        //         if (i < midPoint) {
        //             admissibleOpponentsList1.appendChild(li);
        //         } else {
        //             admissibleOpponentsList2.appendChild(li);
        //         }
        //     }

        //     // Check if there are more opponents beyond the limit
        //     if (admissibleOpponents.length > limit) {
        //         const li = document.createElement('li');
        //         li.innerText = '...';
        //         admissibleOpponentsList2.appendChild(li);
        //     }
        // }

        function updateAdmissibleOpponents() {
            admissibleOpponentsList1.innerHTML = '';
            const limit = Math.min(admissibleOpponents.length, 9);
            for (let i = 0; i < limit; i++) {
                const li = document.createElement('li');
                li.innerText = admissibleOpponents[i];
                admissibleOpponentsList1.appendChild(li);
                
            }
            // Check if there are more opponents beyond the limit
            if (admissibleOpponents.length > limit) {
                const li = document.createElement('li');
                li.innerText = '...';
                admissibleOpponentsList1.appendChild(li);
            }
        }

        function updateSelectedMatch() {
            selectedMatchText.innerHTML = `(H) ${selectedMatch[0]}, (A) ${selectedMatch[1]}`;
        }

        function showAdmissibleOpponents() {
            admissibleOpponentsContainer.style.display = 'block';
            selectedMatchContainer.style.display = 'none';
        }

        function showSelectedMatch() {
            admissibleOpponentsContainer.style.display = 'none';
            selectedMatchContainer.style.display = 'block';
        }

        function HighlightSelectedTeam() {
            const groupNumber = Math.floor(countEquipe / 9) + 1;
            const selected_team_line = document.getElementById(`row-pot-table-${currentTeam}`);
            selected_team_line.style.backgroundColor = '#E5EEF6'
        }

        function ReverseHighlightSelectedTeam(){
            const groupNumber = Math.floor(countEquipe / 9) + 1;
            const selected_team_line = document.getElementById(`row-pot-table-${currentTeam}`);
            selected_team_line.style.backgroundColor = ''
        }


        function updateInterface() {
            updatePotAdv();
            updateAdmissibleOpponents();
            updateSelectedMatch();
        }

        function HighlightOpponentPot() {
            // Surlignage des cellules correspondant aux adversaires sélectionnés dans le tableau des résultats
            const homeCell2 = document.getElementById(`pot-${String.fromCharCode(97 + potAdv)}-home-${currentTeam}`);
            const awayCell2 = document.getElementById(`pot-${String.fromCharCode(97 + potAdv)}-away-${currentTeam}`);
            
            if (homeCell2) {
                homeCell2.style.backgroundColor = '#F5D1D1';  // Surligner la cellule de l'adversaire (home)
            }
            if (awayCell2) {
                awayCell2.style.backgroundColor = '#F5D1D1';  // Surligner la cellule de l'adversaire (away)
            }
        }

        function ReverseHighlightOpponentPot(){
            // Réinitialiser le surlignage des cellules correspondant aux adversaires
            const homeCell2 = document.getElementById(`pot-${String.fromCharCode(97 + potAdv)}-home-${currentTeam}`);
            const awayCell2 = document.getElementById(`pot-${String.fromCharCode(97 + potAdv)}-away-${currentTeam}`);
            
            if (homeCell2) {
                homeCell2.style.backgroundColor = '';  // Réinitialiser la cellule de l'adversaire (home)
            }
            if (awayCell2) {
                awayCell2.style.backgroundColor = '';  // Réinitialiser la cellule de l'adversaire (away)
            }
        }

        function updateResultTables() {
            const groupNumber_py = Math.floor(countEquipe / 9);
            const homeCell = document.getElementById(`result-pot-${String.fromCharCode(97 + potAdv)}-home-${currentTeam}`);
            const awayCell = document.getElementById(`result-pot-${String.fromCharCode(97 + potAdv)}-away-${currentTeam}`);
            const homeCell2 = document.getElementById(`result-pot-${String.fromCharCode(97 + groupNumber_py)}-home-${selectedMatch[1]}`);
            const awayCell2 = document.getElementById(`result-pot-${String.fromCharCode(97 + groupNumber_py)}-away-${selectedMatch[0]}`);
            homeCell.innerText = selectedMatch[0];
            awayCell.innerText = selectedMatch[1];
            homeCell2.innerText = currentTeam;
            awayCell2.innerText = currentTeam;
        }

        updateInterface();
        updateCurrentTeam();
        updateCurrentGroup();

        drawButton.addEventListener('click', function() {
            if (countEquipe >= 36) {
                drawButton.disabled = true;
                drawButton.innerText = "Draw Complete";
                currentTeam = " "
                currentGroupText = " "
                return;
            }

            drawButton.disabled = true;
            drawButton.innerText = "Loading...";

            setTimeout(() => {
                updateCurrentTeam();
                updateCurrentGroup();
                HighlightSelectedTeam()
                if (lastDim === 0) {
                    console.log(`Possible opponents for team ${currentTeam}:`, admissibleOpponents);
                    showAdmissibleOpponents();
                    HighlightOpponentPot();
                    admissibleOpponents = drawData[countEquipe][1][potAdv][0];
                    updateAdmissibleOpponents();
                    lastDim = 1;

                    console.log(`Current Team ${currentTeam}:`);
                } else {
                    let groupNumber_py = Math.floor(countEquipe / 9);
                    selectedMatch = drawData[countEquipe][1][potAdv][1];
                    updateSelectedMatch();
                    console.log(`Selected match for team ${currentTeam}:`, selectedMatch);
                    const homeCell = document.getElementById(`pot-${String.fromCharCode(97 + potAdv)}-home-${currentTeam}`);
                    const awayCell = document.getElementById(`pot-${String.fromCharCode(97 + potAdv)}-away-${currentTeam}`);
                    const homeCell2 = document.getElementById(`pot-${String.fromCharCode(97 + groupNumber_py)}-home-${selectedMatch[1]}`);
                    const awayCell2 = document.getElementById(`pot-${String.fromCharCode(97 + groupNumber_py)}-away-${selectedMatch[0]}`);
                    homeCell.innerText = selectedMatch[0];
                    awayCell.innerText = selectedMatch[1];
                    homeCell2.innerText = currentTeam;
                    awayCell2.innerText = currentTeam;

                    console.log(homeCell2);  // Should log the element or null
                    console.log(awayCell2);  // Should log the element or null 

                    updateResultTables();
                    ReverseHighlightOpponentPot();

                    lastDim = 0;
                    potAdv += 1;

                    if (potAdv > 3) {
                        ReverseHighlightSelectedTeam()
                        countEquipe += 1;
                        potAdv = Math.min(3, Math.floor(countEquipe / 9));
                        if (countEquipe < 36) {
                            currentTeam = drawData[countEquipe][0];
                        }
                    }
                    console.log(currentTeam)
                    updateInterface();
                    showSelectedMatch();
                }

                drawButton.disabled = false;
                drawButton.innerText = countEquipe >= 36 ? "Draw Complete" : "Continue Draw";


            }, 100);
        });
    });
    </script>
  </body>
</html>
